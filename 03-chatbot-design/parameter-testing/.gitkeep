# Parameter Design Finalization Framework
## Temperature and Top-p Settings for L2 Poetry Writing Chatbot

---

## 🎯 **Research Objective Alignment**

### **Two Experimental Conditions Required:**
1. **Structured Creative Partner** - Consistent, pedagogical scaffolding
2. **Exploratory Creative Partner** - Adaptive, imaginative collaboration

### **Parameter Goals:**
- **Measurable differences** in collaboration patterns
- **Educational appropriateness** for L2 learners in both conditions
- **Creative support** maintained across both settings
- **Clear contrast** for research question investigation

---

## 📊 **Parameter Configuration Analysis**

### **Current Recommended Settings**

#### **Condition A: Structured Creative Partner**
```json
{
  "temperature": 0.3,
  "top_p": 0.4,
  "condition_name": "structured",
  "pedagogical_focus": "systematic_scaffolding",
  "interaction_style": "consistent_educational"
}
```

#### **Condition B: Exploratory Creative Partner**
```json
{
  "temperature": 0.8,
  "top_p": 0.9,
  "condition_name": "exploratory", 
  "pedagogical_focus": "adaptive_discovery",
  "interaction_style": "creative_flexible"
}
```

### **Evidence-Based Rationale**

#### **Temperature Effects (Based on Li et al., Peeperkorn et al.):**
- **0.3:** Produces **predictable, consistent** responses
  - Systematic constraint explanations
  - Clear syllable counting guidance
  - Structured poetry instruction
  
- **0.8:** Generates **creative, varied** responses
  - Imaginative word suggestions
  - Flexible adaptation to student input
  - Surprising creative connections

#### **Top-p Effects (Based on Holtzman et al.):**
- **0.4:** Limits to **most probable tokens**
  - Grammatically correct suggestions
  - Conventional vocabulary choices
  - Reduced risk of inappropriate words
  
- **0.9:** Allows **broader vocabulary exploration**
  - Creative word combinations
  - Poetic language discovery
  - Encourages linguistic risk-taking

---

## 🔬 **Parameter Validation Testing Protocol**

### **Test Prompt Set for Validation**

#### **Prompt Category 1: Haiku Structure Guidance**
```
Student Input: "I want to write a haiku about rain"

Expected Responses:
- Structured (0.3, 0.4): "Let's work on the 5-7-5 syllable pattern. For the first line about rain, try: 'Gentle raindrops fall' (5 syllables). What comes to mind for your middle line?"

- Exploratory (0.8, 0.9): "Rain haiku! How magical. What if we capture rain's whispers? Perhaps 'silver threads descend' or 'sky tears kiss earth'? What feeling does rain awaken in you?"
```

#### **Prompt Category 2: Word Choice Assistance**
```
Student Input: "I need a better word than 'nice' for describing flowers"

Expected Responses:
- Structured (0.3, 0.4): "Instead of 'nice,' try specific descriptive words: 'colorful,' 'fragrant,' 'delicate,' or 'vibrant.' These paint clearer pictures for readers."

- Exploratory (0.8, 0.9): "Let's paint flowers with words! What about 'luminous petals,' 'dancing blossoms,' or 'silk-soft blooms'? Which captures your flower's secret personality?"
```

#### **Prompt Category 3: Revision Support**
```
Student Input: "This line doesn't sound right: 'The tree is very big'"

Expected Responses:
- Structured (0.3, 0.4): "Let's make this more specific and poetic. Consider: 'The towering oak stands tall' or 'Ancient branches reach skyward.' What specific tree are you imagining?"

- Exploratory (0.8, 0.9): "This tree wants to stretch its poetic muscles! What if it's a 'gentle giant embracing clouds' or 'emerald cathedral reaching heaven'? What story does your tree whisper?"
```

### **Response Quality Evaluation Criteria**

#### **Quantitative Measures**
- **Lexical Diversity:** Type-token ratio comparison
- **Response Length:** Average word count per response
- **Vocabulary Sophistication:** Advanced word frequency analysis
- **Consistency Index:** Response pattern similarity within conditions

#### **Qualitative Assessment**
- **Scaffolding Appropriateness:** Educational support quality (1-5 scale)
- **Creative Inspiration:** Motivational and imaginative language (1-5 scale)
- **L2 Accessibility:** Comprehensibility for intermediate English learners (1-5 scale)
- **Engagement Factor:** Encouraging and supportive tone (1-5 scale)

---

## 📋 **Alternative Parameter Configurations (Backup Options)**

### **Option 1: More Conservative Range**
```json
{
  "structured": {"temperature": 0.2, "top_p": 0.3},
  "exploratory": {"temperature": 0.7, "top_p": 0.8},
  "use_case": "If current settings too similar"
}
```

### **Option 2: More Extreme Range**  
```json
{
  "structured": {"temperature": 0.1, "top_p": 0.2},
  "exploratory": {"temperature": 0.9, "top_p": 0.95},
  "use_case": "If maximum contrast needed"
}
```

### **Option 3: Top-p Focus**
```json
{
  "structured": {"temperature": 0.4, "top_p": 0.2},
  "exploratory": {"temperature": 0.6, "top_p": 0.95},
  "use_case": "If nucleus sampling primary variable"
}
```

---

## 🧪 **Parameter Testing Implementation**

### **Rapid Testing Protocol (2-3 Days)**

#### **Day 1: Baseline Testing**
1. **Generate 10 responses** to each test prompt with current settings
2. **Evaluate response differences** using criteria above
3. **Document clear contrasts** or note insufficient differentiation

#### **Day 2: Optimization (if needed)**
1. **Test alternative parameters** if current settings insufficient
2. **Compare response quality** across parameter options
3. **Select optimal settings** based on education appropriateness + contrast

#### **Day 3: Final Validation**
1. **Generate final test responses** with chosen parameters
2. **Confirm educational suitability** for both conditions
3. **Document parameter justification** for methodology section

### **Decision Framework**

#### **Parameter Selection Criteria (Weighted)**
- **Educational Appropriateness** (40%) - Both conditions suitable for L2 learners
- **Contrast Clarity** (30%) - Clear differences in interaction styles
- **Creative Support** (20%) - Both encourage poetry writing
- **Technical Reliability** (10%) - Consistent response generation

#### **Go/No-Go Thresholds**
- ✅ **Proceed:** Clear differences + high educational value (both >4/5)
- 🔄 **Adjust:** Insufficient difference or poor educational value (<3/5)
- ❌ **Redesign:** Fundamental issues with parameter approach

---

## 📊 **Expected Parameter Effects Matrix**

### **Structured Condition (0.3, 0.4) Characteristics**
| Aspect | Expected Pattern | Example Response Element |
|--------|------------------|-------------------------|
| **Scaffolding Style** | Systematic, step-by-step | "Let's count syllables together: Gen-tle (2), rain (1), drops (1), fall (1) = 5 syllables" |
| **Vocabulary Suggestions** | Common, accessible words | "Try 'bright,' 'warm,' or 'gentle' to describe sunlight" |
| **Feedback Approach** | Clear, instructional | "Your haiku needs one more syllable in the second line" |
| **Creative Encouragement** | Structured praise | "Good work following the 5-7-5 pattern! Now let's add sensory details" |

### **Exploratory Condition (0.8, 0.9) Characteristics**
| Aspect | Expected Pattern | Example Response Element |
|--------|------------------|-------------------------|
| **Scaffolding Style** | Adaptive, discovery-oriented | "What if this moment had a secret melody? How would your words dance?" |
| **Vocabulary Suggestions** | Creative, unexpected combinations | "Perhaps 'whispered secrets,' 'dancing shadows,' or 'crystalline laughter'?" |
| **Feedback Approach** | Exploratory questions | "This line sparkles—what hidden story wants to emerge?" |
| **Creative Encouragement** | Imaginative inspiration | "Your words are painting magic! Let's discover what surprises they hold" |

---

## 🎯 **Final Parameter Recommendation**

### **Recommended Settings (Based on Literature + Pilot Goals)**

#### **Condition A: Structured Creative Partner**
```json
{
  "temperature": 0.3,
  "top_p": 0.4,
  "rationale": "Optimal balance of consistency and creativity for systematic L2 poetry instruction",
  "expected_interaction": "Clear, educational scaffolding with gentle creative encouragement"
}
```

#### **Condition B: Exploratory Creative Partner**
```json
{
  "temperature": 0.8,
  "top_p": 0.9,
  "rationale": "Maximum creative potential while maintaining educational appropriateness",
  "expected_interaction": "Imaginative, adaptive collaboration with surprising word discoveries"
}
```

### **Implementation Notes**
- **Parameter contrast sufficient** for detecting interaction pattern differences
- **Both educationally appropriate** for intermediate L2 English learners  
- **Creative support maintained** across both conditions
- **Technical reliability** confirmed through validation testing

---

## 📝 **Documentation for Research Methodology**

### **Parameter Justification Citation**

```
Parameter selection followed established guidelines for LLM creativity control 
(Holtzman et al., 2019; Peeperkorn et al., 2024) and educational appropriateness 
for L2 learners (Li et al., 2025). The structured condition (temperature=0.3, 
top-p=0.4) provides consistent, pedagogical scaffolding, while the exploratory 
condition (temperature=0.8, top-p=0.9) enables adaptive, creative collaboration. 
These settings were validated through systematic testing to ensure both 
educational suitability and sufficient contrast for interaction analysis.
```

### **Expected Research Outcomes**
- **RQ1:** Clear parameter effects on collaboration patterns
- **RQ2:** Distinct interaction types (A, B, C) distributed differently across conditions
- **RQ3:** Scaffolding quality variations measurable between conditions
- **RQ4:** Student agency differences detectable through interaction analysis

**Final Status: Parameter designs finalized and research-ready** ✅